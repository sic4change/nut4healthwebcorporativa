/**
 * JSON con las cadenas traducidas a los diferentes idiomas.
 * No hay español, por ser el default.
 */
frases = {
  "en": {
    "Español": "Spanish",
    "Inglés": "English",
    "TECNOLOGÍA PARA ACABAR CON EL HAMBRE": "TECHNOLOGY TO FINISH WITH HUNGER",
    "Menú": "Menu",
    "Inicio": "Start",
    "El problema...": "El problema...",
    "¿Qué es NUT4Health?": "¿Qué es NUT4Health?",
    "¿Cómo funciona?": "¿Cómo funciona?",
    "Estadísticas": "Estadísticas",
    "Quienes somos": "Quienes somos",
    "De la mano de...": "De la mano de...",
    "Contacto": "Contacto",
    "NUT4Health": "NUT4Health",
    "820 millones de personas sufren hambre en el mundo. Como resultado, 8.500 niños mueren al día por desnutrición. La identificación temprana de los casos es la clave para su recuperación, sin embargo, la mayoría de los pacientes llegan tarde a los centros de tratamiento, con lo que sus posibilidades de sobrevivir son más bajas y los costes del tratamiento muy elevados.": "820 millones de personas sufren hambre en el mundo. Como resultado, 8.500 niños mueren al día por desnutrición. La identificación temprana de los casos es la clave para su recuperación, sin embargo, la mayoría de los pacientes llegan tarde a los centros de tratamiento, con lo que sus posibilidades de sobrevivir son más bajas y los costes del tratamiento muy elevados.",
    "Hambre": "Hambre",
    "820": "820",
    "millones de personas sufren hambre": "millones de personas sufren hambre",
    "Mortalidad infantil": "Mortalidad infantil",
    "8500": "8500",
    "niños mueren al día por desnutrición": "niños mueren al día por desnutrición",
    "Errores": "Errores",
    "30%": "30%",
    "de error en los diagnósticos actuales": "de error en los diagnósticos actuales",
    "La solución": "La solución",
    "Nut4Health es una plataforma tecnológica que promueve una búsqueda activa de pacientes en desnutrición a través de un sistema de pagos con tecnología blockchain que permite una identificación de los casos antes de que sea demasiado tarde.": "Nut4Health es una plataforma tecnológica que promueve una búsqueda activa de pacientes en desnutrición a través de un sistema de pagos con tecnología blockchain que permite una identificación de los casos antes de que sea demasiado tarde.",
    "Confianza": "Confianza",
    "A través de tecnología Blockchain, Nut4Health garantiza la trazabilidad de los pagos en las intervenciones en desnutrición y los automatiza con Smart Contracts para ofrecer la mayor transparencia en el uso de los fondos.": "A través de tecnología Blockchain, Nut4Health garantiza la trazabilidad de los pagos en las intervenciones en desnutrición y los automatiza con Smart Contracts para ofrecer la mayor transparencia en el uso de los fondos.",
    "Acierto": "Acierto",
    "Nut4Health permite automatizar el diagnóstico de la desnutrición minimizando el error humano hasta un 5%. Además, posibilita la integración de los datos para facilitar los procesos de toma de decisiones a nivel del Sistema de Salud de cada país.": "Nut4Health permite automatizar el diagnóstico de la desnutrición minimizando el error humano hasta un 5%. Además, posibilita la integración de los datos para facilitar los procesos de toma de decisiones a nivel del Sistema de Salud de cada país.",
    "Incentivos": "Incentivos",
    "Nut4Health genera un sistema de incentivos para los voluntarios comunitarios de salud transformándoles en profesionales al pagarles por resultados relacionados con la prevención y el diagnóstico de la desnutrición maternoinfantil. ": "Nut4Health genera un sistema de incentivos para los voluntarios comunitarios de salud transformándoles en profesionales al pagarles por resultados relacionados con la prevención y el diagnóstico de la desnutrición maternoinfantil. ",
    "Un ejemplo práctico": "Un ejemplo práctico",
    "Cómo Funciona Nut4Health": "Cómo Funciona Nut4Health",
    "Un ejemplo: de 25€ que cuesta un tratamiento medio de desnutrción, en el momento en el que el profesional del diagnóstico identifica un niño con desnutrición, se abriría un contrato inteligente automatizado. Cuando este niño ingrese en el centro de tratamiento, este contrato inteligente se ejecutará y 1€ irá a parar a la cuenta del profesional. Otros 23€ van dirigidos a garantizar la capacidad de respuesta de los centros médicos (a través de la compra de suplementos, medicinas, etc.) y un 1€ al final del proceso se quedará en la plataforma para poder viabilizar la intervención y seguir escalando el modelo.": "Un ejemplo: de 25€ que cuesta un tratamiento medio de desnutrción, en el momento en el que el profesional del diagnóstico identifica un niño con desnutrición, se abriría un contrato inteligente automatizado. Cuando este niño ingrese en el centro de tratamiento, este contrato inteligente se ejecutará y 1€ irá a parar a la cuenta del profesional. Otros 23€ van dirigidos a garantizar la capacidad de respuesta de los centros médicos (a través de la compra de suplementos, medicinas, etc.) y un 1€ al final del proceso se quedará en la plataforma para poder viabilizar la intervención y seguir escalando el modelo.",
    "Descargar dossier": "Descargar dossier",
    "Video Explicativo": "Video Explicativo",
    "La plataforma de Nut4Health conecta a los donantes con los profesionales del diagnóstico a través de tecnología Blockchain que permite automatizar los pagos por resultados (diagnósticos realizados, ingresos certificados y actuaciones de prevención). De esta forma, se consiguen generar los incentivos para promover (1) una búsqueda activa de los casos de desnutrción y (2) una proactividad hacia la prevención de la desnutrición.": "La plataforma de Nut4Health conecta a los donantes con los profesionales del diagnóstico a través de tecnología Blockchain que permite automatizar los pagos por resultados (diagnósticos realizados, ingresos certificados y actuaciones de prevención). De esta forma, se consiguen generar los incentivos para promover (1) una búsqueda activa de los casos de desnutrción y (2) una proactividad hacia la prevención de la desnutrición.",
    "Acción Contra el Hambre y SIC4Change": "Acción Contra el Hambre y SIC4Change",
    "Alianza SAMPhoto y NUT4Health": "Alianza SAMPhoto y NUT4Health",
    "Integración del software SAMPhoto dentro de la plataforma NUT4Health para permitir diagnósticos automáticos de la desnutrición de niños de 6 a 59 meses, mediante la utilización de morfometría tras la toma de una imagen de parte del cuerpo.": "Integración del software SAMPhoto dentro de la plataforma NUT4Health para permitir diagnósticos automáticos de la desnutrición de niños de 6 a 59 meses, mediante la utilización de morfometría tras la toma de una imagen de parte del cuerpo.",
    "Tecnología puntera": "Tecnología puntera",
    "Con Blockchain y Smart Contracts": "Con Blockchain y Smart Contracts",
    "La  arquitectura  se  desarrolla  sobre tecnología blockchain que garantiza  la trazabilidad de los pagos y su automatización en base a la App de diagnóstico, además se garantiza que la seguridad sobre los datos sea infranqueable debido a la estructura descentralizada de aprobación y validación de operaciones que permite la cadena de bloques. Por otro lado, los “Smart Contracts”,o contratos inteligentes, permiten automatizar respuestas o acciones condicionadas a resultados. En este caso, actividades de prevención o diagnóstico realizadas, que redunden en la prevención y detección de la desnutrición": "La  arquitectura  se  desarrolla  sobre tecnología blockchain que garantiza  la trazabilidad de los pagos y su automatización en base a la App de diagnóstico, además se garantiza que la seguridad sobre los datos sea infranqueable debido a la estructura descentralizada de aprobación y validación de operaciones que permite la cadena de bloques. Por otro lado, los “Smart Contracts”,o contratos inteligentes, permiten automatizar respuestas o acciones condicionadas a resultados. En este caso, actividades de prevención o diagnóstico realizadas, que redunden en la prevención y detección de la desnutrición",
    "25": "25",
    "Años en seguridad nutricional": "Años en seguridad nutricional",
    "20": "20",
    "Años en TICs": "Años en TICs",
    "60": "60",
    "% desarrollado del proyecto": "% desarrollado del proyecto",
    "3": "3",
    "Premios recibidos": "Premios recibidos",
    "Borja Monreal Gainza": "Borja Monreal Gainza",
    "De tanto mirar hacia otro lado, se le partió el cuello al mundo - Rubén Tejerina": "De tanto mirar hacia otro lado, se le partió el cuello al mundo - Rubén Tejerina",
    "Blanca Pérez Lozano": "Blanca Pérez Lozano",
    "La realidad puede ser golpeada con suficiente imaginación - Mark Twain": "La realidad puede ser golpeada con suficiente imaginación - Mark Twain",
    "Aaron Asencio Tavío": "Aaron Asencio Tavío",
    "Se ha vuelto terriblemente obvio que nuestra tecnología ha superado nuestra humanidad - Albert Einstein": "Se ha vuelto terriblemente obvio que nuestra tecnología ha superado nuestra humanidad - Albert Einstein",
    "Dónde estamos": "Dónde estamos",
    "Contáctanos": "Contáctanos",
  }
};

/**
 * Función que cambia todos los elementos al nuevo idioma.
 *
 * @param {string} lang
 */
function cambiarIdioma(lang) {
  // Habilita las 2 siguientes para guardar la preferencia.
  // lang = lang || sessionStorage.getItem('app-lang') || 'es';
  // sessionStorage.setItem('app-lang', lang);

  var elems = document.querySelectorAll('[data-tr]');
  for (var x = 0; x < elems.length; x++) {
    elems[x].innerHTML = frases.hasOwnProperty(lang)
      ? frases[lang][elems[x].dataset.tr]
      : elems[x].dataset.tr;
  }
  if (lang == 'es') {
    document.getElementById('btn-es').src="images/spain.png"
    document.getElementById('btn-en').src="images/united-kingdom_disabled.png"
  } else if (lang == 'en') {
    document.getElementById('btn-es').src="images/spain_disabled.png"
    document.getElementById('btn-en').src="images/united-kingdom.png"
  } else if (lang == null) {
    var ln = x=window.navigator.language||navigator.browserLanguage;
    //document.getElementById('app-title').innerHTML = 'hola'; 
    span = document.getElementById("app-title");
    //txt = document.createTextNode("your cool text");
    //span.appendChild('txt');
    cambiarIdioma.bind(null, ln);
  }
}

window.onload = function(){
  cambiarIdioma();
  
  document
    .getElementById('btn-es')
    .addEventListener('click', cambiarIdioma.bind(null, 'es'));

  document
    .getElementById('btn-en')
    .addEventListener('click', cambiarIdioma.bind(null, 'en'));

}